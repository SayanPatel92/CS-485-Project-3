<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This tiny crate checks that the running or installed `rustc` meets some version requirements. The version is queried by calling the Rust compiler with `--version`. The path to the compiler is determined first via the `RUSTC` environment variable. If it is not set, then `rustc` is used. If that fails, no determination is made, and calls return `None`."><title>version_check - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="version_check" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0 (aedd173a2 2024-03-17)" data-channel="1.77.0" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../version_check/index.html">version_check</a><span class="version">0.9.4</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../version_check/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">version_check</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/version_check/lib.rs.html#1-493">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This tiny crate checks that the running or installed <code>rustc</code> meets some
version requirements. The version is queried by calling the Rust compiler
with <code>--version</code>. The path to the compiler is determined first via the
<code>RUSTC</code> environment variable. If it is not set, then <code>rustc</code> is used. If
that fails, no determination is made, and calls return <code>None</code>.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<ul>
<li>
<p>Set a <code>cfg</code> flag in <code>build.rs</code> if the running compiler was determined to
be at least version <code>1.13.0</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">if </span>rustc::is_min_version(<span class="string">"1.13.0"</span>).unwrap_or(<span class="bool-val">false</span>) {
    <span class="macro">println!</span>(<span class="string">"cargo:rustc-cfg=question_mark_operator"</span>);
}</code></pre></div>
<p>See <a href="fn.is_max_version.html" title="fn version_check::is_max_version"><code>is_max_version</code></a> or <a href="fn.is_exact_version.html" title="fn version_check::is_exact_version"><code>is_exact_version</code></a> to check if the compiler
is <em>at most</em> or <em>exactly</em> a certain version.</p>
</li>
<li>
<p>Check that the running compiler was released on or after <code>2018-12-18</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">match </span>rustc::is_min_date(<span class="string">"2018-12-18"</span>) {
    <span class="prelude-val">Some</span>(<span class="bool-val">true</span>) =&gt; <span class="string">"Yep! It's recent!"</span>,
    <span class="prelude-val">Some</span>(<span class="bool-val">false</span>) =&gt; <span class="string">"No, it's older."</span>,
    <span class="prelude-val">None </span>=&gt; <span class="string">"Couldn't determine the rustc version."
</span>};</code></pre></div>
<p>See <a href="fn.is_max_date.html" title="fn version_check::is_max_date"><code>is_max_date</code></a> or <a href="fn.is_exact_date.html" title="fn version_check::is_exact_date"><code>is_exact_date</code></a> to check if the compiler was
released <em>prior to</em> or <em>exactly on</em> a certain date.</p>
</li>
<li>
<p>Check that the running compiler supports feature flags:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">match </span>rustc::is_feature_flaggable() {
    <span class="prelude-val">Some</span>(<span class="bool-val">true</span>) =&gt; <span class="string">"Yes! It's a dev or nightly release!"</span>,
    <span class="prelude-val">Some</span>(<span class="bool-val">false</span>) =&gt; <span class="string">"No, it's stable or beta."</span>,
    <span class="prelude-val">None </span>=&gt; <span class="string">"Couldn't determine the rustc version."
</span>};</code></pre></div>
</li>
<li>
<p>Check that the running compiler supports a specific feature:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">if let </span><span class="prelude-val">Some</span>(<span class="bool-val">true</span>) = rustc::supports_feature(<span class="string">"doc_cfg"</span>) {
   <span class="macro">println!</span>(<span class="string">"cargo:rustc-cfg=has_doc_cfg"</span>);
}</code></pre></div>
</li>
<li>
<p>Check that the running compiler is on the stable channel:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern crate </span>version_check <span class="kw">as </span>rustc;

<span class="kw">match </span>rustc::Channel::read() {
    <span class="prelude-val">Some</span>(c) <span class="kw">if </span>c.is_stable() =&gt; <span class="macro">format!</span>(<span class="string">"Yes! It's stable."</span>),
    <span class="prelude-val">Some</span>(c) =&gt; <span class="macro">format!</span>(<span class="string">"No, the channel {} is not stable."</span>, c),
    <span class="prelude-val">None </span>=&gt; <span class="macro">format!</span>(<span class="string">"Couldn't determine the rustc version."</span>)
};</code></pre></div>
</li>
</ul>
<p>To interact with the version, release date, and release channel as structs,
use <a href="struct.Version.html" title="struct version_check::Version"><code>Version</code></a>, <a href="struct.Date.html" title="struct version_check::Date"><code>Date</code></a>, and <a href="struct.Channel.html" title="struct version_check::Channel"><code>Channel</code></a>, respectively. The <a href="fn.triple.html" title="fn version_check::triple"><code>triple()</code></a>
function returns all three values efficiently.</p>
<h2 id="alternatives"><a class="doc-anchor" href="#alternatives">§</a>Alternatives</h2>
<p>This crate is dead simple with no dependencies. If you need something more
and don’t care about panicking if the version cannot be obtained, or if you
don’t mind adding dependencies, see
<a href="https://crates.io/crates/rustc_version">rustc_version</a>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Channel.html" title="struct version_check::Channel">Channel</a></div><div class="desc docblock-short">Release channel: “dev”, “nightly”, “beta”, or “stable”.</div></li><li><div class="item-name"><a class="struct" href="struct.Date.html" title="struct version_check::Date">Date</a></div><div class="desc docblock-short">Release date including year, month, and day.</div></li><li><div class="item-name"><a class="struct" href="struct.Version.html" title="struct version_check::Version">Version</a></div><div class="desc docblock-short">Version number: <code>major.minor.patch</code>, ignoring release channel.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.is_exact_date.html" title="fn version_check::is_exact_date">is_exact_date</a></div><div class="desc docblock-short">Checks that the running or installed <code>rustc</code> was released <strong>exactly</strong> on
some date.</div></li><li><div class="item-name"><a class="fn" href="fn.is_exact_version.html" title="fn version_check::is_exact_version">is_exact_version</a></div><div class="desc docblock-short">Checks that the running or installed <code>rustc</code> is <strong>exactly</strong> some version.</div></li><li><div class="item-name"><a class="fn" href="fn.is_feature_flaggable.html" title="fn version_check::is_feature_flaggable">is_feature_flaggable</a></div><div class="desc docblock-short">Checks whether the running or installed <code>rustc</code> supports feature flags.</div></li><li><div class="item-name"><a class="fn" href="fn.is_max_date.html" title="fn version_check::is_max_date">is_max_date</a></div><div class="desc docblock-short">Checks that the running or installed <code>rustc</code> was released <strong>on or before</strong>
some date.</div></li><li><div class="item-name"><a class="fn" href="fn.is_max_version.html" title="fn version_check::is_max_version">is_max_version</a></div><div class="desc docblock-short">Checks that the running or installed <code>rustc</code> is <strong>at most</strong> some maximum
version.</div></li><li><div class="item-name"><a class="fn" href="fn.is_min_date.html" title="fn version_check::is_min_date">is_min_date</a></div><div class="desc docblock-short">Checks that the running or installed <code>rustc</code> was released <strong>on or after</strong>
some date.</div></li><li><div class="item-name"><a class="fn" href="fn.is_min_version.html" title="fn version_check::is_min_version">is_min_version</a></div><div class="desc docblock-short">Checks that the running or installed <code>rustc</code> is <strong>at least</strong> some minimum
version.</div></li><li><div class="item-name"><a class="fn" href="fn.supports_feature.html" title="fn version_check::supports_feature">supports_feature</a></div><div class="desc docblock-short">Checks whether the running or installed <code>rustc</code> supports <code>feature</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.triple.html" title="fn version_check::triple">triple</a></div><div class="desc docblock-short">Reads the triple of <a href="struct.Version.html" title="struct version_check::Version"><code>Version</code></a>, <a href="struct.Channel.html" title="struct version_check::Channel"><code>Channel</code></a>, and <a href="struct.Date.html" title="struct version_check::Date"><code>Date</code></a> of the installed
or running <code>rustc</code>.</div></li></ul></section></div></main></body></html>